version: "3.9"

services:
  teabot:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: teabot
    restart: always
    env_file: ../.env
    volumes:
      - ../data:/app/data
      - ../logs:/app/logs
    environment:
      - TZ=Europe/Moscow
      - PYTHONPATH=/app
    healthcheck:
      test: ["CMD", "python", "-c", "import sqlite3; import sys; sys.exit(0 if sqlite3.connect('/app/data/forwards.db') else 1)"]
      interval: 60s
      timeout: 10s
      retries: 3

